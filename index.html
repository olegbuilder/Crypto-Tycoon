<script>
    let balance = 0;
    let upgradeLevel = 0;
    let upgradePrice = 30; // Начальная цена улучшения
    let clickCount = 0; // Счётчик кликов
    let boostActive = false; // Активен ли Boost
    let rewardMultiplier = 1; // Множитель награды
    let boostChance = 0.5; // Шанс на успех без буста
    const boostDuration = 10000; // 10 секунд

    function mine() {
        clickCount++;
        updateBoostBar();

        const arrow = document.getElementById("arrow");
        const result = Math.random() < boostChance ? "up" : "down";

        if (result === "up") {
            let reward = 10 * rewardMultiplier;
            balance += reward;
            arrow.textContent = "⬆️";
            arrow.className = "up";
        } else {
            balance -= 5;
            arrow.textContent = "⬇️";
            arrow.className = "down";
        }

        updateDisplay();
    }

    function buyUpgrade() {
        if (balance >= upgradePrice) {
            balance -= upgradePrice;
            upgradeLevel++;
            upgradePrice += 5; // Увеличиваем цену следующего улучшения
            rewardMultiplier += 0.5; // Увеличиваем множитель награды
            alert(`Upgrade purchased! New price is ${upgradePrice} BTC`);
        } else {
            alert("Not enough BTC to buy upgrade!");
        }

        updateDisplay();
    }

    function activateBoost() {
        if (clickCount >= 100) {
            boostActive = true;
            boostChance = 0.9;
            clickCount = 0;
            setTimeout(deactivateBoost, boostDuration);
            document.getElementById("boost").disabled = true;
        } else {
            alert("You need 100 clicks to activate Boost!");
        }
    }

    function deactivateBoost() {
        boostActive = false;
        boostChance = 0.5;
        document.getElementById("boost").disabled = false;
    }

    function updateBoostBar() {
        let progress = (clickCount / 100) * 100;
        document.getElementById("boost-progress").style.width = progress + "%";

        if (clickCount >= 100) {
            document.getElementById("boost").disabled = false;
        }
    }

    function updateDisplay() {
        document.getElementById("score").textContent = `Your Balance: ${balance} BTC`;
        document.getElementById("upgrade-level").textContent = `Upgrade Level: ${upgradeLevel}`;
        document.getElementById("upgrade-price").textContent = `Next Upgrade Price: ${upgradePrice} BTC`;
    }

    // Автосейв каждые 10 секунд
    setInterval(() => {
        localStorage.setItem("balance", balance);
        localStorage.setItem("upgradeLevel", upgradeLevel);
        localStorage.setItem("upgradePrice", upgradePrice);
        localStorage.setItem("clickCount", clickCount);
    }, 10000);

    // Загрузка сохранения при старте
    window.onload = () => {
        balance = parseInt(localStorage.getItem("balance")) || 0;
        upgradeLevel = parseInt(localStorage.getItem("upgradeLevel")) || 0;
        upgradePrice = parseInt(localStorage.getItem("upgradePrice")) || 30;
        clickCount = parseInt(localStorage.getItem("clickCount")) || 0;
        updateDisplay();
    };
</script>
