<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Tycoon</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #1e1e1e;
            color: white;
        }
        #arrow {
            margin: 20px;
            font-size: 50px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin-top: 10px;
            cursor: pointer;
        }
        .up {
            color: green;
        }
        .down {
            color: red;
        }
        #score {
            font-size: 24px;
            margin-top: 20px;
        }
        #donate {
            background-color: gold;
            color: black;
        }
        #boost-bar {
            width: 100%;
            height: 20px;
            background-color: grey;
            margin-top: 20px;
        }
        #boost-progress {
            height: 100%;
            width: 0;
            background-color: lime;
        }
        #boost {
            background-color: blue;
            color: white;
        }
        #language-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #333;
            color: white;
            cursor: pointer;
        }
        #leaderboard {
            margin-top: 30px;
            padding: 10px;
            background-color: #333;
            border-radius: 5px;
        }
        #leaderboard h2 {
            margin-bottom: 10px;
        }
        #leaderboard ul {
            list-style-type: none;
            padding: 0;
        }
        #leaderboard li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1 id="game-title">Crypto Tycoon</h1>
    <p id="game-description">Try your luck and see if the market goes up or down!</p>
    <div id="arrow">↔️</div>
    <button onclick="mine()" id="mine-button">Mine Crypto</button>
    <button id="donate" onclick="buyUpgrade()">Donate: Buy Upgrade (30 BTC)</button>
    <button id="boost" onclick="activateBoost()" disabled>Boost</button>
    <div id="score">Your Balance: 0 BTC</div>
    <div id="upgrade-level">Upgrade Level: 0</div>
    <div id="upgrade-price">Next Upgrade Price: 30 BTC</div>
    
    <!-- Boost bar -->
    <div id="boost-bar">
        <div id="boost-progress"></div>
    </div>

    <!-- Таблица лидеров -->
    <div id="leaderboard">
        <h2>Leaderboard</h2>
        <ul id="leaderboard-list">
            <!-- Таблица лидеров будет заполнена здесь -->
        </ul>
    </div>

    <!-- Кнопка для выбора языка -->
    <button id="language-button" onclick="toggleLanguage()">Change Language</button>

    <script>
        let balance = 0;
        let upgradeLevel = 0;
        let upgradePrice = 30; // Начальная цена улучшения
        let clickCount = 0; // Счётчик кликов
        let boostActive = false; // Активен ли Boost
        let rewardMultiplier = 1; // Множитель награды
        let rewardChance = 0.5; // Шанс выпадения стрелки вверх
        const boostDuration = 10000; // 10 секунд

        let language = 'en'; // Переменная для языка (по умолчанию английский)
        let leaderboard = []; // Массив для хранения таблицы лидеров

        // Функция для игры
        function mine() {
            clickCount++;
            updateBoostBar(); // Обновление шкалы прогресса

            // Случайное событие: стрелка идёт вверх или вниз
            const result = Math.random() < rewardChance ? "up" : "down";
            const arrow = document.getElementById("arrow");

            if (result === "up") {
                let reward = 10 * rewardMultiplier; // Если вверх, награда зависит от уровня
                balance += reward;
                arrow.textContent = "⬆️";
                arrow.className = "up";
                alert(getText('earnedBTC', reward));
            } else {
                balance -= 5; // Если вниз, отнимаем 5 BTC
                arrow.textContent = "⬇️";
                arrow.className = "down";
                alert(getText('lostBTC'));
            }

            updateDisplay();
            saveGame(); // Сохраняем прогресс после каждого клика
        }

        // Функция для обновления информации на экране
        function updateDisplay() {
            document.getElementById("score").textContent = `Your Balance: ${balance} BTC`;
            document.getElementById("upgrade-level").textContent = `Upgrade Level: ${upgradeLevel}`;
            document.getElementById("upgrade-price").textContent = `Next Upgrade Price: ${upgradePrice} BTC`;
        }

        // Функция для покупки улучшения
        function buyUpgrade() {
            if (balance >= upgradePrice) {
                balance -= upgradePrice;
                upgradeLevel++;
                upgradePrice += 5; // Увеличение цены улучшения
                rewardMultiplier += 0.5; // Увеличение множителя награды
                rewardChance += 0.1; // Увеличение шанса выпадения стрелки вверх
                alert(getText('upgradePurchased'));
                updateDisplay();
                saveGame(); // Сохраняем прогресс после улучшения
            } else {
                alert(getText('notEnoughBTC'));
            }
        }

        // Функция для активации Boost
        function activateBoost() {
            if (clickCount >= 100) {
                boostActive = true;
                rewardChance = 0.9; // Увеличиваем шанс на успех
                clickCount = 0; // Сбрасываем счётчик кликов
                alert(getText('boostActivated'));

                setTimeout(() => {
                    boostActive = false;
                    rewardChance = 0.5; // Восстанавливаем шанс
                    alert(getText('boostEnded'));
                }, boostDuration);
            } else {
                alert(getText('boostRequired'));
            }
        }

        // Функция для обновления шкалы Boost
        function updateBoostBar() {
            let progress = (clickCount / 100) * 100; // Заполнение шкалы до 100 кликов
            document.getElementById("boost-progress").style.width = progress + "%";
        }

        // Функция для сохранения данных (авто-сейв)
        function saveGame() {
            const gameData = {
                balance: balance,
                upgradeLevel: upgradeLevel,
                upgradePrice: upgradePrice,
                clickCount: clickCount,
                leaderboard: leaderboard,
            };
            localStorage.setItem('cryptoTycoonGame', JSON.stringify(gameData));
        }

        // Функция для загрузки сохраненных данных
        function loadGame() {
            const savedGame = localStorage.getItem('cryptoTycoonGame');
            if (savedGame) {
                const gameData = JSON.parse(savedGame);
                balance = gameData.balance;
                upgradeLevel = gameData.upgradeLevel;
                upgradePrice = gameData.upgradePrice;
                clickCount = gameData.clickCount;
                leaderboard = gameData.leaderboard;
                updateDisplay();
            }
        }

        // Функция для обновления таблицы лидеров
        function updateLeaderboard() {
            leaderboard.push({ name: 'Player', score: balance });
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard = leaderboard.slice(0, 5); // Сохраняем только топ-5
            const leaderboardList = document.getElementById('leaderboard-list');
            leaderboardList.innerHTML = ''; // Очистка списка

            leaderboard.forEach(player => {
                const li = document.createElement('li');
                li.textContent = `${player.name}: ${player.score} BTC`;
                leaderboardList.appendChild(li);
            });
        }

        // Функция для переключения языка
        function toggleLanguage() {
            language = (language === 'en') ? 'ru' : 'en';
            updateText();
        }

        // Функция для обновления текста на странице
        function updateText() {
            document.getElementById("game-title").textContent = getText('gameTitle');
            document.getElementById("game-description").textContent = getText('gameDescription');
            document.getElementById("mine-button").textContent = getText('mineButton');
            document.getElementById("donate").textContent = getText('donateButton');
            document.getElementById("boost").textContent = getText('boostButton');
            document.getElementById("language-button").textContent = getText('languageButton');
        }

        // Функция для получения текста в зависимости от языка
        function getText(key,
